<h1>Your Cart</h1>

<% if @cart.cart_items.any? %>
  <ul>
    <% @cart.cart_items.each do |cart_item| %>
      <li><%= cart_item.product.name %> - $<%= cart_item.product.price %>
        <%#= @cart.cart_items.pluck(:product_id).size %>
        <%= button_to 'Remove', cart_item_path(cart_item), method: :delete, data: { confirm: 'Are you sure?' } %></li>
    <% end %>
  </ul>
  <p>Total: $<%= @cart.cart_items.sum(&:price) %></p>
<% else %>
  <p>Your cart is empty.</p>
<% end %>

<h2>Available Products</h2>
<ul>
  <% @products.each do |product| %>
    <li>
      <%= product.name %> - $<%= product.price %>
      <%= button_to 'Add to Cart', cart_items_path(product_id: product.id), method: :post %>
    </li>
  <% end %>
</ul>
